import{i as y,a2 as g,r as w,ac as E,j as e,W as R,T as l,ad as D,ae as C,a0 as B,k as z,af as F,S as p,C as T,n as I,a1 as L,e as M,o as O,B as W,q as b,ag as k,G as v,p as H,t as V,v as N}from"./index-BWtbNFs0.js";import"./dayjs.min-FbL4-WuB.js";import{C as q}from"./ContentCopyOutlined-CKsZguKt.js";import{T as P}from"./Tooltip-CPwIRFMd.js";import{T as A}from"./TextField-BlOSjD-L.js";import{D as Q}from"./Divider-DXKpzQgs.js";import"./Menu-BfME0a2c.js";import"./List-DbLTnloQ.js";import"./Popper-DSbUDxgM.js";import"./Select-CbvnhIHS.js";import"./FormControl-eaAdJI2X.js";import"./dividerClasses-p4V02u-N.js";const G=1*60*1e3;function U(){const o=y(),a=g(t=>t.wallet.hasTimedOut),d=g(t=>t.wallet.countdownEndTime),[i,u]=w.useState(0);w.useEffect(()=>{if(a){u(0);return}let t=d;t||(t=Date.now()+G,o(E(t)));const n=()=>{const h=Date.now(),m=Math.max(0,Math.floor((t-h)/1e3));u(m),m<=0&&(clearInterval(c),o(D(!0)),o(C()))};n();const c=setInterval(n,1e3);return()=>clearInterval(c)},[o,a,d]);const x=t=>{const n=String(Math.floor(t/60)).padStart(2,"0"),c=String(t%60).padStart(2,"0");return`${n}:${c}`};return e.jsxs(R,{sx:{display:"flex",gap:".5rem",alignItems:"center"},children:[e.jsx(l,{children:"Time Left:"}),e.jsx(l,{fontSize:"1.2rem",fontWeight:600,color:a?"error":"text.primary",children:a?"Time Out":x(i)})]})}function $(){const o=B("(max-width:500px)"),a=y(),{depositQRData:d}=g(f=>f.wallet),i=d,[u,x]=w.useState(!1),t=f=>{navigator.clipboard.writeText(f),x(!0),setTimeout(()=>{x(!1)},1500)},{register:n,handleSubmit:c,reset:h}=z({defaultValues:{transactionHash:""}}),[m,{isLoading:j}]=F(),s=async f=>{var S;try{const r=await m(f).unwrap();r!=null&&r.status&&(h(defaultValues),a(b({open:!0,message:r==null?void 0:r.message,severity:"success"})),a(C()),a(D(!0)))}catch(r){r!=null&&r.data&&a(b({open:!0,message:((S=r==null?void 0:r.data)==null?void 0:S.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(p,{mt:"2rem",children:e.jsx(T,{children:e.jsx(I,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"2rem",height:"100%",padding:{xs:"1rem",md:"2rem"}},component:"form",onSubmit:c(s),children:e.jsxs(L,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"1rem",wordBreak:"break-word"},children:[e.jsx(l,{variant:"h6",children:"Scan QR Code to Complete Deposit"}),i?e.jsx("img",{src:i==null?void 0:i.data,alt:"Deposit QR",style:{maxWidth:"150px",width:"100%",height:"auto",border:"1px solid #ccc",borderRadius:"8px"}}):e.jsx(l,{color:"text.secondary",children:"QR Code not available"}),e.jsx(U,{}),e.jsxs(p,{sx:{flexDirection:"row",alignItems:"center"},children:[e.jsxs(l,{children:["Deposit Address: ",i==null?void 0:i.depositAddress]}),e.jsx(P,{title:u?"Copied!":"Copy",children:e.jsx(M,{onClick:()=>t(i==null?void 0:i.depositAddress),children:e.jsx(q,{sx:{fontSize:"20px"}})})})]}),e.jsxs(p,{width:o?"100%":"400px",children:[e.jsx(O,{sx:{mb:".5rem"},children:"Transaction hash"}),e.jsx(A,{multiline:!0,...n("transactionHash",{require:!0}),size:"small",fullWidth:!0,placeholder:"Transaction hash",variant:"outlined"}),e.jsx(W,{variant:"contained",size:"small",type:"submit",disabled:j,sx:{textTransform:"capitalize",width:"5rem",mt:"1rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Verify"})]})]})})})})}const _=V({amount:N().min(1,"Please type your deposit amount")});function J(){const{countdownEndTime:o}=g(m=>m.wallet),a=y(),d={amount:""},{register:i,handleSubmit:u,reset:x,formState:{errors:t}}=z({resolver:H(_),defaultValues:d}),[n,{isLoading:c}]=k(),h=async m=>{var j;try{const s=await n(m).unwrap();s!=null&&s.status&&(x(d),a(b({open:!0,message:s==null?void 0:s.message,severity:"success"})))}catch(s){s!=null&&s.data&&a(b({open:!0,message:((j=s==null?void 0:s.data)==null?void 0:j.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(p,{mt:"1.2rem",children:e.jsx(T,{children:e.jsxs(I,{sx:{padding:{xs:"1rem",sm:"2rem"},borderRadius:"2rem",boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:[e.jsx(l,{variant:"h6",m:{xs:"1rem",sm:"0"},children:"Fill details"}),e.jsx(Q,{sx:{my:"1.2rem"}}),e.jsxs(p,{gap:"2rem",component:"form",onSubmit:u(h),children:[e.jsx(v,{container:!0,size:12,spacing:3,children:e.jsxs(v,{item:!0,size:{xs:12,sm:6},children:[e.jsx(O,{sx:{mb:".5rem"},children:"Amount to be deposit"}),e.jsx(A,{...i("amount",{require:!0}),size:"small",fullWidth:!0,placeholder:"Amount to be deposit",variant:"outlined"}),t.amount&&e.jsx(l,{color:"error",children:t.amount.message})]})}),e.jsx(W,{variant:"contained",size:"small",type:"submit",disabled:c||o,sx:{textTransform:"capitalize",width:"5rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})})})}function ce(){const{depositQRData:o}=g(a=>a.wallet);return e.jsxs(p,{mt:"100px",children:[e.jsx(T,{children:e.jsx(l,{variant:"h4",fontWeight:"bold",mb:"2rem",children:"Deposit Balance"})}),e.jsx(J,{}),o&&e.jsx($,{})]})}export{ce as default};
