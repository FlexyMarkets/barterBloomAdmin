import{j as e,J as u,Y as v,r as l,V as E,S as n,K as d,W as p,X as A}from"./index-BBayQUVJ.js";import{c as L,u as k,L as Y,D,M as I,F as R,a as x,w as _}from"./xlsx-CBsTcNwQ.js";import{S as B}from"./Selector-CgLRpCHs.js";import{d as b,A as H}from"./AdapterDayjs-zkNgsLwl.js";import"./Close-DQydUF_R.js";import"./ExpandMore-C4Cb0Gyr.js";import"./MenuItem-D2goyhKV.js";import"./Tooltip-BWE-O29E.js";import"./Radio-Bkh4Eny3.js";import"./TextField-BWfRF5gs.js";import"./Select-D4TQFvcu.js";import"./Divider-AUl7ksY8.js";const o=L(),W=[o.accessor("balanceType",{header:"Balance Type",size:120}),o.accessor("transactionType",{header:"Transaction Type",size:150}),o.display({header:"From user",size:150,Cell:({row:a})=>e.jsx(u,{children:a.original.user.name})}),o.accessor("amount",{header:"Amount",size:150}),o.accessor("status",{header:"Status",size:150}),o.accessor("description",{header:"Description",size:250}),o.accessor("createdAt",{header:"Registration Date",size:200,Cell:({row:a})=>e.jsx(u,{children:new Date(a.original.createdAt).toLocaleString()})})],N=["PENDING","COMPLETED","REJECTED"],O=a=>{const i=x.json_to_sheet(a),c=x.book_new();x.book_append_sheet(c,i,"Sheet1"),_(c,"transactionList.xlsx")};function se(){var f,g;const{id:a}=v(),[i,c]=l.useState({pageIndex:0,pageSize:10}),[s,j]=l.useState({status:"",transactionType:"",fromDate:null,toDate:null}),T=s.fromDate?b(s.fromDate).format("YYYY-MM-DD"):void 0,S=s.toDate?b(s.toDate).format("YYYY-MM-DD"):void 0,{data:r,isLoading:y,isError:w}=E({page:i.pageIndex+1,sizePerPage:i.pageSize,userId:a,...s,startDate:T,endDate:S},{skip:!a}),h=((f=r==null?void 0:r.data)==null?void 0:f.docs)||[],z=l.useMemo(()=>W,[]),C=l.useMemo(()=>h,[h]),F=k({columns:z,data:C,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:((g=r==null?void 0:r.data)==null?void 0:g.totalDocs)||0,state:{pagination:i,isLoading:y,showAlertBanner:w},onPaginationChange:c,columnFilterDisplayMode:"popover",enableGlobalFilter:!1,paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",renderTopToolbarCustomActions:()=>e.jsx(d,{sx:{display:"flex",gap:2,padding:1,flexWrap:"wrap"},children:e.jsx(A,{variant:"contained",onClick:()=>O(transactionsListData),startIcon:e.jsx(R,{sx:{color:"white"}}),sx:{textTransform:"none",color:"white",boxShadow:"none",bgcolor:"primary.main","&:hover":{boxShadow:"none"}},children:"Excel"})})}),m=l.useCallback((t,M)=>{j(P=>({...P,[t]:M}))},[]);return e.jsxs(n,{sx:{mt:"30px"},children:[e.jsx(u,{variant:"h5",fontWeight:700,fontSize:"1.5rem",mb:4,children:"Transaction history"}),e.jsx(n,{children:e.jsxs(d,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},gap:2,flexWrap:"wrap",mb:4},children:[e.jsx(d,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:e.jsxs(n,{children:[e.jsx(p,{sx:{mb:.5,fontSize:12},children:"Status"}),e.jsx(B,{items:N,value:s.status,onChange:t=>m("status",t.target.value),width:{xs:"100%",sm:200}})]})}),e.jsx(Y,{dateAdapter:H,children:e.jsxs(d,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[e.jsxs(n,{children:[e.jsx(p,{sx:{mb:.5,fontSize:12},children:"From"}),e.jsx(D,{value:s.fromDate,onChange:t=>m("fromDate",t),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]}),e.jsxs(n,{children:[e.jsx(p,{sx:{mb:.5,fontSize:12},children:"To"}),e.jsx(D,{value:s.toDate,onChange:t=>m("toDate",t),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]})]})})]})}),e.jsx(n,{sx:{mt:2,borderRadius:2,overflow:"hidden"},children:e.jsx(I,{table:F})})]})}export{se as default};
