import{j as e,J as u,r as i,V as z,I,K as d,S as l,W as x,X as w}from"./index-BBayQUVJ.js";import{c as L,u as N,L as M,D as T,M as v,F as O,a as p,w as W}from"./xlsx-CBsTcNwQ.js";import{S as f}from"./Selector-CgLRpCHs.js";import{d as g,A as k}from"./AdapterDayjs-zkNgsLwl.js";import"./Close-DQydUF_R.js";import"./ExpandMore-C4Cb0Gyr.js";import"./MenuItem-D2goyhKV.js";import"./Tooltip-BWE-O29E.js";import"./Radio-Bkh4Eny3.js";import"./TextField-BWfRF5gs.js";import"./Select-D4TQFvcu.js";import"./Divider-AUl7ksY8.js";const o=L(),B=[o.display({header:"Name",size:150,Cell:({row:t})=>{var n,a;return e.jsx(u,{children:(a=(n=t==null?void 0:t.original)==null?void 0:n.user)==null?void 0:a.name})}}),o.accessor("balanceType",{header:"Balance Type",size:120}),o.accessor("transactionType",{header:"Transaction Type",size:250}),o.accessor("amount",{header:"Amount",size:150}),o.accessor("status",{header:"Status",size:150}),o.accessor("description",{header:"Description",size:250}),o.accessor("createdAt",{header:"Registration Date",size:200,Cell:({row:t})=>e.jsx(u,{children:new Date(t.original.createdAt).toLocaleString()})})],Y=["PENDING","COMPLETED","REJECTED"],U=["BURN","DEPOSIT","TRADE","WITHDRAW","CONVERT-REWARD","PROFIT-SHARING-INCOME","SIGNUP-BONUS","LEVEL-AIR-DROP","REFERAL-INCOME","FUND-TRANSFER","RANK-REWARD","RANK-UPGRADE-BONUS","DELEGATED-REWARD","SWAP-MAIN-TO-TRADE","SWAP-AFFLIATE-TO-TRADE"],_=t=>{const n=p.json_to_sheet(t),a=p.book_new();p.book_append_sheet(a,n,"Sheet1"),W(a,"transactionList.xlsx")};function te(){var h,D;const[t,n]=i.useState({pageIndex:0,pageSize:10}),[a,E]=i.useState({status:"",transactionType:"",fromDate:null,toDate:null}),S=a.fromDate?g(a.fromDate).format("YYYY-MM-DD"):void 0,A=a.toDate?g(a.toDate).format("YYYY-MM-DD"):void 0,{data:r,isLoading:j,isError:R}=z({page:t.pageIndex+1,sizePerPage:t.pageSize,...a,startDate:S,endDate:A}),m=((h=r==null?void 0:r.data)==null?void 0:h.docs)||[],b=i.useMemo(()=>B,[]),y=i.useMemo(()=>m,[m]),C=N({columns:b,data:y,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:((D=r==null?void 0:r.data)==null?void 0:D.totalDocs)||0,state:{pagination:t,isLoading:j,showAlertBanner:R},onPaginationChange:n,columnFilterDisplayMode:"popover",enableGlobalFilter:!1,paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",renderTopToolbarCustomActions:()=>e.jsx(d,{sx:{display:"flex",gap:2,padding:1,flexWrap:"wrap"},children:e.jsx(w,{variant:"contained",onClick:()=>_(m),startIcon:e.jsx(O,{sx:{color:"white"}}),sx:{textTransform:"none",color:"white",boxShadow:"none",bgcolor:"primary.main","&:hover":{boxShadow:"none"}},children:"Excel"})})}),c=i.useCallback((s,F)=>{E(P=>({...P,[s]:F}))},[]);return e.jsxs(I,{sx:{mt:"100px"},children:[e.jsx(u,{variant:"h5",fontWeight:700,fontSize:"1.8rem",mb:4,children:"Transaction List"}),e.jsxs(d,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},gap:2,flexWrap:"wrap",mb:4},children:[e.jsxs(d,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:[e.jsxs(l,{children:[e.jsx(x,{sx:{mb:.5,fontSize:12},children:"Status"}),e.jsx(f,{items:Y,value:a.status,onChange:s=>c("status",s.target.value),width:{xs:"100%",sm:200}})]}),e.jsxs(l,{children:[e.jsx(x,{sx:{mb:.5,fontSize:12},children:"Transaction type"}),e.jsx(f,{items:U,value:a.transactionType,onChange:s=>c("transactionType",s.target.value),width:{xs:"100%",sm:200}})]})]}),e.jsx(M,{dateAdapter:k,children:e.jsxs(d,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[e.jsxs(l,{children:[e.jsx(x,{sx:{mb:.5,fontSize:12},children:"From"}),e.jsx(T,{value:a.fromDate,onChange:s=>c("fromDate",s),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]}),e.jsxs(l,{children:[e.jsx(x,{sx:{mb:.5,fontSize:12},children:"To"}),e.jsx(T,{value:a.toDate,onChange:s=>c("toDate",s),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]})]})})]}),e.jsx(l,{sx:{mt:4,borderRadius:2,overflow:"hidden"},children:e.jsx(v,{table:C})})]})}export{te as default};
