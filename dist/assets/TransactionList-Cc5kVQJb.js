import{j as e,J as u,r as i,V as v,I as E,K as l,S as c,W as p,X as L}from"./index-DnJX0o2f.js";import{c as P,u as A,L as k,D as g,M as I,F as Y,a as x,w as R}from"./xlsx-suSZ0i5M.js";import{S as _}from"./Selector-BjyZeoKH.js";import{d as D,A as B}from"./AdapterDayjs-BkxX2rwH.js";import"./Close-CQy3dKBU.js";import"./ExpandMore-D_61eCRe.js";import"./MenuItem-BuFA0ty6.js";import"./Tooltip-D_08rPN6.js";import"./Radio-1K5N1jTV.js";import"./TextField-NIQczD1o.js";import"./Select-BoGkIfGs.js";import"./Divider-zBJBtrzW.js";const o=P(),N=[o.display({header:"Name",size:150,Cell:({row:t})=>{var n,a;return e.jsx(u,{children:(a=(n=t==null?void 0:t.original)==null?void 0:n.user)==null?void 0:a.name})}}),o.accessor("balanceType",{header:"Balance Type",size:120}),o.accessor("transactionType",{header:"Transaction Type",size:250}),o.accessor("amount",{header:"Amount",size:150}),o.accessor("status",{header:"Status",size:150}),o.accessor("description",{header:"Description",size:250}),o.accessor("createdAt",{header:"Registration Date",size:200,Cell:({row:t})=>e.jsx(u,{children:new Date(t.original.createdAt).toLocaleString()})})],W=["PENDING","COMPLETED","REJECTED"],H=t=>{const n=x.json_to_sheet(t),a=x.book_new();x.book_append_sheet(a,n,"Sheet1"),R(a,"transactionList.xlsx")};function ae(){var h,f;const[t,n]=i.useState({pageIndex:0,pageSize:10}),[a,b]=i.useState({status:"",transactionType:"",fromDate:null,toDate:null}),j=a.fromDate?D(a.fromDate).format("YYYY-MM-DD"):void 0,T=a.toDate?D(a.toDate).format("YYYY-MM-DD"):void 0,{data:r,isLoading:S,isError:y}=v({page:t.pageIndex+1,sizePerPage:t.pageSize,...a,startDate:j,endDate:T}),d=((h=r==null?void 0:r.data)==null?void 0:h.docs)||[],C=i.useMemo(()=>N,[]),z=i.useMemo(()=>d,[d]),w=A({columns:C,data:z,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:((f=r==null?void 0:r.data)==null?void 0:f.totalDocs)||0,state:{pagination:t,isLoading:S,showAlertBanner:y},onPaginationChange:n,columnFilterDisplayMode:"popover",enableGlobalFilter:!1,paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",renderTopToolbarCustomActions:()=>e.jsx(l,{sx:{display:"flex",gap:2,padding:1,flexWrap:"wrap"},children:e.jsx(L,{variant:"contained",onClick:()=>H(d),startIcon:e.jsx(Y,{sx:{color:"white"}}),sx:{textTransform:"none",color:"white",boxShadow:"none",bgcolor:"primary.main","&:hover":{boxShadow:"none"}},children:"Excel"})})}),m=i.useCallback((s,F)=>{b(M=>({...M,[s]:F}))},[]);return e.jsxs(E,{sx:{mt:"100px"},children:[e.jsx(u,{variant:"h5",fontWeight:700,fontSize:"1.8rem",mb:4,children:"Transaction List"}),e.jsxs(l,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},gap:2,flexWrap:"wrap",mb:4},children:[e.jsx(l,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:e.jsxs(c,{children:[e.jsx(p,{sx:{mb:.5,fontSize:12},children:"Status"}),e.jsx(_,{items:W,value:a.status,onChange:s=>m("status",s.target.value),width:{xs:"100%",sm:200}})]})}),e.jsx(k,{dateAdapter:B,children:e.jsxs(l,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[e.jsxs(c,{children:[e.jsx(p,{sx:{mb:.5,fontSize:12},children:"From"}),e.jsx(g,{value:a.fromDate,onChange:s=>m("fromDate",s),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]}),e.jsxs(c,{children:[e.jsx(p,{sx:{mb:.5,fontSize:12},children:"To"}),e.jsx(g,{value:a.toDate,onChange:s=>m("toDate",s),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]})]})})]}),e.jsx(c,{sx:{mt:4,borderRadius:2,overflow:"hidden"},children:e.jsx(I,{table:w})})]})}export{ae as default};
