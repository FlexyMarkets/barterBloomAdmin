import{t as W,v as c,i as k,k as A,_ as G,w as L,j as e,T as s,S as y,C as B,n as M,G as o,o as l,B as N,p as Q,q as w}from"./index-BWtbNFs0.js";import{D as V}from"./Divider-DXKpzQgs.js";import{T as u}from"./TextField-BlOSjD-L.js";import"./dividerClasses-p4V02u-N.js";import"./Select-CbvnhIHS.js";import"./Menu-BfME0a2c.js";import"./List-DbLTnloQ.js";import"./FormControl-eaAdJI2X.js";const _=W({amount:c().trim().min(1,"Please type your transfer amount"),referralCode:c().trim().min(1,"Please type your referral code"),password:c().trim().min(1,"Please type your transaction password")});function $(){var p,f,j;const x=k(),h={amount:"",referralCode:"",password:""},{register:m,handleSubmit:T,watch:v,setError:C,reset:S,formState:{errors:a}}=A({resolver:Q(_),defaultValues:h}),[z,{isLoading:F}]=G(),n=v("referralCode"),{data:t,isError:R,error:d,isFetching:I}=L({referralCode:n},{skip:!n,refetchOnMountOrArgChange:!0,refetchOnReconnect:!0});let i=null;!n||n.trim()===""?i=null:I?i=e.jsx(s,{children:"Loading..."}):R?i=e.jsx(s,{color:"red",children:(p=d==null?void 0:d.data)==null?void 0:p.message}):(f=t==null?void 0:t.data)!=null&&f.name&&(i=e.jsx(s,{children:(j=t==null?void 0:t.data)==null?void 0:j.name}));const q=async E=>{var g,b;try{const r=await z(E).unwrap();r!=null&&r.status&&(S(h),x(w({open:!0,message:r==null?void 0:r.message,severity:"success"})))}catch(r){(g=r==null?void 0:r.data)!=null&&g.data?Object.entries(r.data.data).forEach(([O,P])=>{C(O,{type:"server",message:P})}):x(w({open:!0,message:((b=r==null?void 0:r.data)==null?void 0:b.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(y,{mt:"100px",children:e.jsxs(B,{children:[e.jsx(s,{variant:"h4",fontWeight:"bold",mb:"2rem",children:"Internal Transfer"}),e.jsxs(M,{sx:{padding:{xs:"1rem",sm:"2rem"},borderRadius:"2rem",boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:[e.jsx(s,{variant:"h6",m:{xs:"1rem",sm:"0"},children:"Fill details"}),e.jsx(V,{sx:{my:"1.2rem"}}),e.jsxs(y,{gap:"2rem",component:"form",onSubmit:T(q),children:[e.jsxs(o,{container:!0,size:12,spacing:2,children:[e.jsxs(o,{item:!0,size:{xs:12,sm:6},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Amount to Fund Transfer *"}),e.jsx(u,{...m("amount",{require:!0}),size:"small",fullWidth:!0,placeholder:"Amount transfer",variant:"outlined"}),a.amount&&e.jsx(s,{color:"error",children:a.amount.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Referral Code *"}),e.jsx(u,{...m("referralCode",{require:!0}),size:"small",fullWidth:!0,placeholder:"Referral code",variant:"outlined"}),e.jsx(l,{sx:{mb:".5rem"},children:i}),a.referralCode&&e.jsx(s,{color:"error",children:a.referralCode.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Transaction password *"}),e.jsx(u,{...m("password",{require:!0}),size:"small",fullWidth:!0,placeholder:"Transaction password",variant:"outlined"}),a.password&&e.jsx(s,{color:"error",children:a.password.message})]})]}),e.jsx(N,{variant:"contained",size:"small",type:"submit",disabled:F,sx:{textTransform:"capitalize",width:"5rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})]})})}export{$ as default};
